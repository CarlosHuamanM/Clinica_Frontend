<!-- Paneles de métricas -->
<div class="row gy-4">
    <div class="col-md-6">
        <div class="bg-info text-white p-4 rounded text-center">
            <h2>Cantidad de citas</h2>
            <form [formGroup]="formCitasPorSexo">
                <label for="startDate">Desde</label>
                <input type="date" class="form-control" id="startDate" name="startDate" formControlName="startDate"
                    [class]="{'is-invalid': formCitasPorSexo.get('startDate')?.invalid && formCitasPorSexo.get('startDate')?.touched}"
                    (change)="loadChartDataCitasPorSexo(formCitasPorSexo.get('startDate')?.value ?? '2024-11-01', formCitasPorSexo.get('endDate')?.value ?? '2024-12-12')">
                <label for="endDate">Hasta</label>
                <input type="date" class="form-control" id="endDate" name="endDate" formControlName="endDate"
                    [class]="{'is-invalid': formCitasPorSexo.get('endDate')?.invalid && formCitasPorSexo.get('endDate')?.touched}"
                    (change)="loadChartDataCitasPorSexo(formCitasPorSexo.get('startDate')?.value ?? '2024-11-01', formCitasPorSexo.get('endDate')?.value ?? '2024-12-12')">
            </form>
            
            <app-chart [type]="'bar'" [data]="dataCitasPorSexo" [options]="optionsCitasPorSexo"></app-chart>
        </div>
    </div>

    <div class="col-md-6">
        <div class="bg-info text-white p-4 rounded text-center">
            <h2>Citas por tipo de tratamiento</h2>
            <form [formGroup]="formCitasPorSexo">
                <label for="startDate">Desde</label>
                <input type="date" class="form-control" id="startDate" name="startDate" formControlName="startDate"
                    [class]="{'is-invalid': formCitasPorSexo.get('startDate')?.invalid && formCitasPorSexo.get('startDate')?.touched}"
                    (change)="loadChartDataCitasPorTipoTratamiento(formCitasPorTipoTratamiento.get('startDate')?.value ?? '2024-11-01', formCitasPorTipoTratamiento.get('endDate')?.value ?? '2024-12-12')">
                <label for="endDate">Hasta</label>
                <input type="date" class="form-control" id="endDate" name="endDate" formControlName="endDate"
                    [class]="{'is-invalid': formCitasPorSexo.get('endDate')?.invalid && formCitasPorSexo.get('endDate')?.touched}"
                    (change)="loadChartDataCitasPorTipoTratamiento(formCitasPorTipoTratamiento.get('startDate')?.value ?? '2024-11-01', formCitasPorTipoTratamiento.get('endDate')?.value ?? '2024-12-12')">>
            </form>
            <app-chart [type]="'bar'" [data]="dataCitasPorTipoTratamiento"
                [options]="optionsCitasPorTipoTratamiento"></app-chart>
        </div>
    </div>

    <div class="col-md-6">
        <div class="bg-primary text-white p-4 rounded text-center">
            <h2 class="text-dark">Citas por estado</h2>
            <form [formGroup]="formCitasCanceladas">
                <label for="startDate">Desde</label>
                <input type="date" class="form-control" id="startDate" name="startDate" formControlName="startDate"
                    [class]="{'is-invalid': formCitasCanceladas.get('startDate')?.invalid && formCitasCanceladas.get('startDate')?.touched}">
                <label for="endDate">Hasta</label>
                <input type="date" class="form-control" id="endDate" name="endDate" formControlName="endDate"
                    [class]="{'is-invalid': formCitasCanceladas.get('endDate')?.invalid && formCitasCanceladas.get('endDate')?.touched}">
            </form>
            <app-chart [type]="'bar'" [data]="dataCitasCanceladas" [options]="optionsCitasCanceladas"></app-chart>
        </div>
    </div>
    <div class="col-md-6">
        <div class="bg-primary text-white p-4 rounded text-center">
            <h2 class="text-dark">Numero de citas por dentista</h2>
            <table class="table table-striped table-bordered mt-2">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Nombres</th>
                        <th>N° de colegiatura</th>
                        <th>#de citas</th>
                    </tr>
                </thead>
                <tbody>
                    @for (item of dataCitasPorDentista | async; track $index) {
                        <tr>
                            <td>{{item.dentistaId}}</td>
                            <td>{{item.dentistaNombres}}</td>
                            <td>{{item.dentistaColegiatura}}</td>
                            <td>{{item.total}}</td>
                    }
                </tbody>
            </table>
        </div>
    </div>

    <!-- Nuevos pacientes -->
    <div class="col-md-6">
        <div class="bg-info text-white p-4 rounded text-center">
            <h6>Nuevos pacientes</h6>
            <h1>30</h1>
            <div class="dropdown">
                <select class="form-select form-select-sm" aria-label="Mes">
                    <option selected>Enero</option>
                    <option>Febrero</option>
                    <option>Marzo</option>
                </select>
            </div>
        </div>
    </div>
</div>
<div class="container py-4">
    <!-- Número de citas por mes -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="bg-dark text-white p-3 rounded">
                <h5>Número de citas por mes</h5>
                <div class="d-flex justify-content-between align-items-center">
                    <div class="dropdown">
                        <select class="form-select form-select-sm" aria-label="Seleccionar año">
                            <option selected>2024</option>
                            <option>2023</option>
                            <option>2022</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ganancias por mes -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="bg-dark text-white p-3 rounded">
                <h5>Ganancias por mes</h5>
                <div class="dropdown mt-2">
                    <select class="form-select form-select-sm" aria-label="Seleccionar año">
                        <option selected>2024</option>
                        <option>2023</option>
                        <option>2022</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
</div>